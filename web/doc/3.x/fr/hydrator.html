



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>6   Les hydrateurs &mdash; documentation ting 1</title>
    

    <style>
        .highlight {
            background: #272822 !important;
        }

        div[class^='highlight'] {
            border: 0 !important;
            margin-top: 0 !important;
        }

        div[class='highlight-text'] pre {
            color: #fff !important;
        }

        .code-block-caption {
            padding: 6px 12px !important;
            background: #171812 !important;
            color: white !important;
        }

        .code-block-caption .headerlink {
            display: none;
            visibility: hidden;
        }

        .code-block-caption .headerlink:after {
            visibility: visible;
            content: "";
            font-family: FontAwesome;
            display: inline-block;
        }

        .code-block-caption:hover .headerlink {
            display: inline-block;
        }
    </style>

    
    

    
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://static.ccmbg.com/fc/css.php?m=footer">

    
    
    

    

    
    
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    

    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="search" title="Recherche" href="search.html"/>
    <link rel="top" title="documentation ting 1" href="index.html"/>
    <link rel="next" title="7   L’unitOfWork" href="unitofwork.html"/>
    <link rel="prev" title="5   Le Repository" href="repository.html"/> 

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">
<div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-nav-search">
            
            <a href="/ting/" class="fa fa-home"> ting</a>
            
            
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">1&nbsp;&nbsp;&nbsp;Utilisation sans framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#initialisation">1.1&nbsp;&nbsp;&nbsp;Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#installer-ting">1.2&nbsp;&nbsp;&nbsp;Installer Ting</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#initialisation-de-la-base-de-donnees">1.3&nbsp;&nbsp;&nbsp;Initialisation de la base de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#creation-des-repository">1.4&nbsp;&nbsp;&nbsp;Création des repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#creation-du-repository-city">1.5&nbsp;&nbsp;&nbsp;Création du repository City</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#creation-du-repository-country">1.6&nbsp;&nbsp;&nbsp;Création du repository Country</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#creation-du-repository-countrylanguage">1.7&nbsp;&nbsp;&nbsp;Création du repository CountryLanguage</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#configuration-de-la-connexion-a-la-base-de-donnees">1.8&nbsp;&nbsp;&nbsp;Configuration de la connexion à la base de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#configuration-pour-indiquer-l-emplacement-des-repository">1.9&nbsp;&nbsp;&nbsp;Configuration pour indiquer l’emplacement des repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#creation-des-entitees">1.10&nbsp;&nbsp;&nbsp;Création des entitées</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started.html#vous-pouvez-maintenant-utiliser-ting">1.11&nbsp;&nbsp;&nbsp;Vous pouvez maintenant utiliser Ting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="getting-started-symfony.html">2&nbsp;&nbsp;&nbsp;Utilisation avec Symfony 2.8</a><ul>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#initialisation">2.1&nbsp;&nbsp;&nbsp;Initialisation</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#supprimer-les-dependances-a-doctrine-inutiles">2.2&nbsp;&nbsp;&nbsp;Supprimer les dépendances à Doctrine inutiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#installer-ting">2.3&nbsp;&nbsp;&nbsp;Installer Ting</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#initialisation-de-la-base-de-donnees">2.4&nbsp;&nbsp;&nbsp;Initialisation de la base de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#creation-des-repository">2.5&nbsp;&nbsp;&nbsp;Création des repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#creation-du-repository-city">2.6&nbsp;&nbsp;&nbsp;Création du repository City</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#creation-du-repository-country">2.7&nbsp;&nbsp;&nbsp;Création du repository Country</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#creation-du-repository-countrylanguage">2.8&nbsp;&nbsp;&nbsp;Création du repository CountryLanguage</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#configuration-de-la-connexion-a-la-base-de-donnees">2.9&nbsp;&nbsp;&nbsp;Configuration de la connexion à la base de données</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#configuration-pour-indiquer-l-emplacement-des-repository">2.10&nbsp;&nbsp;&nbsp;Configuration pour indiquer l’emplacement des repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#creation-des-entitees">2.11&nbsp;&nbsp;&nbsp;Création des entitées</a></li>
<li class="toctree-l2"><a class="reference internal" href="getting-started-symfony.html#vous-pouvez-maintenant-utiliser-ting">2.12&nbsp;&nbsp;&nbsp;Vous pouvez maintenant utiliser Ting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="entity.html">3&nbsp;&nbsp;&nbsp;Les entités</a><ul>
<li class="toctree-l2"><a class="reference internal" href="entity.html#au-sujet-des-entites">3.1&nbsp;&nbsp;&nbsp;Au sujet des entités</a></li>
<li class="toctree-l2"><a class="reference internal" href="entity.html#les-entites-et-l-unitofwork">3.2&nbsp;&nbsp;&nbsp;Les entités et l’UnitOfWork</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="query.html">4&nbsp;&nbsp;&nbsp;Les requêtes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="query.html#effectuer-une-requete-de-lecture">4.1&nbsp;&nbsp;&nbsp;Effectuer une requête de lecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="query.html#effectuer-une-requete-d-ecriture">4.2&nbsp;&nbsp;&nbsp;Effectuer une requête d’écriture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="repository.html">5&nbsp;&nbsp;&nbsp;Le Repository</a><ul>
<li class="toctree-l2"><a class="reference internal" href="repository.html#au-sujet-du-repository">5.1&nbsp;&nbsp;&nbsp;Au sujet du Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="repository.html#creation-des-metadata">5.2&nbsp;&nbsp;&nbsp;Création des Metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="repository.html#le-serializer">5.3&nbsp;&nbsp;&nbsp;Le Serializer</a></li>
<li class="toctree-l2"><a class="reference internal" href="repository.html#querybuilder">5.4&nbsp;&nbsp;&nbsp;QueryBuilder</a></li>
<li class="toctree-l2"><a class="reference internal" href="repository.html#requetes">5.5&nbsp;&nbsp;&nbsp;Requêtes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6&nbsp;&nbsp;&nbsp;Les hydrateurs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#au-sujet-des-hydrateurs">6.1&nbsp;&nbsp;&nbsp;Au sujet des hydrateurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-hydrateur-par-defaut">6.2&nbsp;&nbsp;&nbsp;L’hydrateur par défaut</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-hydrateur-pour-un-seul-objet">6.3&nbsp;&nbsp;&nbsp;L’hydrateur pour un seul objet</a></li>
<li class="toctree-l2"><a class="reference internal" href="#l-hydrateur-d-aggregation">6.4&nbsp;&nbsp;&nbsp;L’hydrateur d’aggrégation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#donnees-sans-metadata">6.5&nbsp;&nbsp;&nbsp;Données sans metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mapper-des-donnees-sans-metadata">6.6&nbsp;&nbsp;&nbsp;Mapper des données sans metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deserializer-des-donnees-sans-metadata">6.7&nbsp;&nbsp;&nbsp;Déserializer des données sans metadata</a></li>
<li class="toctree-l2"><a class="reference internal" href="#composition-d-objet">6.8&nbsp;&nbsp;&nbsp;Composition d’objet</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="unitofwork.html">7&nbsp;&nbsp;&nbsp;L’unitOfWork</a><ul>
<li class="toctree-l2"><a class="reference internal" href="unitofwork.html#au-sujet-de-l-unitofwork">7.1&nbsp;&nbsp;&nbsp;Au sujet de l’unitOfWork</a></li>
<li class="toctree-l2"><a class="reference internal" href="unitofwork.html#principe">7.2&nbsp;&nbsp;&nbsp;Principe</a></li>
<li class="toctree-l2"><a class="reference internal" href="unitofwork.html#remarques-pour-les-batchs">7.3&nbsp;&nbsp;&nbsp;Remarques pour les batchs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="cache.html">8&nbsp;&nbsp;&nbsp;Le cache</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cache.html#au-sujet-du-cache">8.1&nbsp;&nbsp;&nbsp;Au sujet du cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="cache.html#requete-simple">8.2&nbsp;&nbsp;&nbsp;Requête simple</a></li>
<li class="toctree-l2"><a class="reference internal" href="cache.html#requete-preparee">8.3&nbsp;&nbsp;&nbsp;Requête préparée</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="composant-cache.html">9&nbsp;&nbsp;&nbsp;Le composant cache</a></li>
</ul>

            
            
        </div>
        &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

        
        <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
            <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
            <a href="index.html">ting</a>
        </nav>


        
        <div class="wy-nav-content">
            
            <div class="rst-content">
                















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>6&nbsp;&nbsp;&nbsp;Les hydrateurs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
                <div role="main" class="document">
                    
  <div class="section" id="les-hydrateurs">
<h1>6&nbsp;&nbsp;&nbsp;Les hydrateurs<a class="headerlink" href="#les-hydrateurs" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="au-sujet-des-hydrateurs">
<h2>6.1&nbsp;&nbsp;&nbsp;Au sujet des hydrateurs<a class="headerlink" href="#au-sujet-des-hydrateurs" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’hydrateur va être chargé de transformer le résultat d’une requête SQL dans les objets qui ont été configurés dans les metadata
par l’intermédiaire du <a class="reference internal" href="repository.html"><span class="doc">Repository</span></a></p>
</div>
<div class="section" id="l-hydrateur-par-defaut">
<h2>6.2&nbsp;&nbsp;&nbsp;L’hydrateur par défaut<a class="headerlink" href="#l-hydrateur-par-defaut" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’hydrateur par défaut va retourner pour chaque ligne un tableau associatif avec pour clé le nom de la table (ou l’alias utilisé)
et pour valeur l’objet qu’il a réussi à créer par rapport aux metadata.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCommentForSylvain</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT id, name, c.text FROM user LEFT JOIN comment c ON (c.user_id = user.id) WHERE name = :name&#39;</span><span class="p">);</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">setParams</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sylvain&#39;</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="nx">User</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">3</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;Sylvain&quot;</span>
    <span class="p">),</span>
    <span class="s1">&#39;c&#39;</span> <span class="o">=&gt;</span> <span class="nx">Comment</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">text</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;Bonjour tout le monde&quot;</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
<div class="section" id="jointure-avec-aucune-donnee">
<h3>6.2.1&nbsp;&nbsp;&nbsp;Jointure avec aucune donnée<a class="headerlink" href="#jointure-avec-aucune-donnee" title="Lien permanent vers ce titre">¶</a></h3>
<p>Lorsque la jointure ne retourne aucune donnée, la clé “c” aura pour valeur null</p>
</div>
</div>
<div class="section" id="l-hydrateur-pour-un-seul-objet">
<span id="id1"></span><h2>6.3&nbsp;&nbsp;&nbsp;L’hydrateur pour un seul objet<a class="headerlink" href="#l-hydrateur-pour-un-seul-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>L’hydrateur par défaut est optimisé pour retourner plusieurs objets, lorsque l’on fait une requête qui n’a pour but que de retourner
un objet, il n’est pas des plus appropriés.</p>
<p>Vous pouvez injecter <code class="docutils literal"><span class="pre">CCMBenchmark\Ting\Repository\HydratorSingleObject</span></code> qui conviendra mieux à votre besoin.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUserSylvain</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT id, name, FROM user WHERE name = :name&#39;</span><span class="p">);</span>
        <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">setParams</span><span class="p">([</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sylvain&#39;</span><span class="p">]);</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCollection</span><span class="p">(</span><span class="k">new</span> <span class="nx">CCMBenchmark\Ting\Repository\HydratorSingleObject</span><span class="p">()));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>La collection retournée est une collection d’objet User.</p>
</div>
<div class="section" id="l-hydrateur-d-aggregation">
<span id="id2"></span><h2>6.4&nbsp;&nbsp;&nbsp;L’hydrateur d’aggrégation<a class="headerlink" href="#l-hydrateur-d-aggregation" title="Lien permanent vers ce titre">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Disponible uniquement à partir de la version 3.3</p>
</div>
<p>Celui-ci permet d’aggréger un ensemble de résultats, par exemple retourner une collection d’objet User et que chaque objet User ai la liste de tous les livres possédés par ce dernier.</p>
<p>Voici un exemple d’utilisation</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersWithBooks</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT user.id, user.name, book.id, book.name</span>
<span class="s1">                FROM user</span>
<span class="s1">                INNER JOIN book ON (book.user_id = user.id)</span>
<span class="s1">                ORDER BY user.id&#39;</span><span class="p">);</span>

        <span class="nv">$hydratorAggregator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\CCMBenchmark\Ting\Repository\HydratorAggregator</span><span class="p">();</span>
        <span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableIdIs</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
        <span class="p">});</span>

        <span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableDataIs</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">];</span>
        <span class="p">});</span>

        <span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableFinalizeAggregate</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$books</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setBooks</span><span class="p">(</span><span class="nv">$books</span><span class="p">);</span>
            <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">];</span>
        <span class="p">});</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCollection</span><span class="p">(</span><span class="nv">$hydratorAggregator</span><span class="p">));</span>
<span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>Rentrons un peu dans les détails :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableIdIs</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">getId</span><span class="p">();</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La closure injectée via <code class="docutils literal"><span class="pre">callableIdIs</span></code> permet de retourner l’identifiant qui sera utilisé comme clée d’aggrégation (ici l’identifiant de l’utilisateur)</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Il est très important d’effectuer un tri dans votre requête SQL sur cette clée d’aggrégation sinon vous aurez des résultats partiels.</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableDataIs</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;book&#39;</span><span class="p">];</span>
<span class="p">});</span>
</pre></div>
</div>
<p>La closure injectée via <code class="docutils literal"><span class="pre">callableDataIs</span></code> permet de retourner la donnée qui doit être aggrégée (ici un Livre)</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$hydratorAggregator</span><span class="o">-&gt;</span><span class="na">callableFinalizeAggregate</span><span class="p">(</span><span class="k">function</span> <span class="p">(</span><span class="nv">$result</span><span class="p">,</span> <span class="nv">$books</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">setBooks</span><span class="p">(</span><span class="nv">$books</span><span class="p">);</span>
    <span class="k">return</span> <span class="nv">$result</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">];</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Cette dernière partie est facultative, si elle est omise, le résultat de l’aggrégation se trouvera dans la clée <code class="docutils literal"><span class="pre">aggregate</span></code> de la collection.
Elle vous permet d’effectuer une opération de finalisation et de choisir ce que vous voulez faire des données qui viennent d’être aggrégées, ici
il s’agit d’une liste de livre que nous injectons dans l’utilisateur via la méthode <code class="docutils literal"><span class="pre">setBooks</span></code></p>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="mi">0</span> <span class="o">=&gt;</span> <span class="nx">User</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s1">&#39;Sylvain&#39;</span>
      <span class="p">[</span><span class="nx">books</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="nx">Book</span><span class="p">(</span>
          <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">1</span>
          <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;Tintin au tibet&quot;</span>
        <span class="p">),</span>
        <span class="nx">Book</span><span class="p">(</span>
          <span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">2</span>
          <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;L&#39;Oreille cassée&quot;</span>
        <span class="p">)</span>
      <span class="p">]</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="donnees-sans-metadata">
<h2>6.5&nbsp;&nbsp;&nbsp;Données sans metadata<a class="headerlink" href="#donnees-sans-metadata" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si vous effectuez une requête qui retourne des données qui ne correspondent à aucune metadata, que ce soit une colonne
d’aggrégation comme <code class="docutils literal"><span class="pre">SUM(price)</span></code> ou une colonne qui n’a pas été mappée comme <code class="docutils literal"><span class="pre">my_extra_column</span></code> l’hydrateur va créer un objet
<code class="docutils literal"><span class="pre">stdClass</span></code> avec des propriétés correspondant à ces colonnes.</p>
<p>Cet objet <code class="docutils literal"><span class="pre">stdClass</span></code> est accessible dans la clée 0 du tableau retourné.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getArticles</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT name, my_extra_column, SUM(price) as total FROM article&#39;</span><span class="p">);</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">();</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="mi">0</span> <span class="o">=&gt;</span> <span class="k">stdClass</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">total</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">43</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">my_extra_column</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s1">&#39;Bic&#39;</span>
    <span class="p">),</span>
    <span class="s1">&#39;article&#39;</span> <span class="o">=&gt;</span> <span class="nx">Article</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;Stylo&quot;</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="mapper-des-donnees-sans-metadata">
<h2>6.6&nbsp;&nbsp;&nbsp;Mapper des données sans metadata<a class="headerlink" href="#mapper-des-donnees-sans-metadata" title="Lien permanent vers ce titre">¶</a></h2>
<p>Dans le cas d’une colonne d’aggrégation, on peut souhaiter la mapper dans un objet.
Pour mapper la colonne <code class="docutils literal"><span class="pre">nb_books</span></code> dans mon model User via la méthode <code class="docutils literal"><span class="pre">setNbBooks</span></code> il suffit de faire :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Hydrator</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getUsersWithNbBooks</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT name, SUM(has_book.id) as nb_books FROM user INNER JOIN has_book ON (user.id = has_book.user_id)&#39;</span><span class="p">);</span>
        <span class="nv">$hydrator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hydrator</span><span class="p">();</span>
        <span class="nv">$hydrator</span><span class="o">-&gt;</span><span class="na">mapAliasTo</span><span class="p">(</span><span class="s1">&#39;nb_books&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;setNbBooks&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCollection</span><span class="p">(</span><span class="nv">$hydrator</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="nx">User</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">nbBooks</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="mi">3</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="deserializer-des-donnees-sans-metadata">
<h2>6.7&nbsp;&nbsp;&nbsp;Déserializer des données sans metadata<a class="headerlink" href="#deserializer-des-donnees-sans-metadata" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour rappel l’action de déserializer consiste à transformer un type de base données dans un type PHP.
Par exemple si on récupère une date qui n’est pas dans des metadata, on peut vouloir transformer la date en objet
<code class="docutils literal"><span class="pre">Datetime</span></code>.</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Hydrator</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Serializer</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getArticlesWithFetchedDate</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT title, NOW() as fetchedDate FROM article&#39;</span><span class="p">);</span>
        <span class="nv">$hydrator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hydrator</span><span class="p">();</span>
        <span class="nv">$hydrator</span><span class="o">-&gt;</span><span class="na">unserializeAliasWith</span><span class="p">(</span><span class="s1">&#39;fetchedDate&#39;</span><span class="p">,</span> <span class="nv">$services</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;SerializerFactory&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="nx">Serializer\Datetime</span><span class="o">::</span><span class="na">class</span><span class="p">))</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCollection</span><span class="p">(</span><span class="nv">$hydrator</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="mi">0</span> <span class="o">=&gt;</span> <span class="k">stdClass</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">fetchedDate</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Datetime</span><span class="p">(</span><span class="s2">&quot;2016-01-13 10:41:36&quot;</span><span class="p">)</span>
    <span class="p">),</span>
    <span class="s1">&#39;article&#39;</span> <span class="o">=&gt;</span> <span class="nx">Article</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;My Awesome Book&quot;</span><span class="p">,</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="composition-d-objet">
<h2>6.8&nbsp;&nbsp;&nbsp;Composition d’objet<a class="headerlink" href="#composition-d-objet" title="Lien permanent vers ce titre">¶</a></h2>
<p>On peut vouloir faire de la composition d’objet, injecter un objet dans un autre et ce sur plusieurs niveaux.
Pour mapper l’objet <code class="docutils literal"><span class="pre">Country</span></code> (qui a l’alias <code class="docutils literal"><span class="pre">co</span></code>) dans mon model <code class="docutils literal"><span class="pre">City</span></code> (qui a l’alias <code class="docutils literal"><span class="pre">cit</span></code>) via la méthode <code class="docutils literal"><span class="pre">setCountry</span></code> il suffit de faire :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Repository</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\MetadataInitializer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\CollectionInterface</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">CCMBenchmark\Ting\Repository\Hydrator</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">SampleRepository</span> <span class="k">extends</span> <span class="nx">Repository</span> <span class="k">implements</span> <span class="nx">MetadataInitializer</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @return CollectionInterface</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">getCityWithCountry</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$query</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getQuery</span><span class="p">(</span><span class="s1">&#39;SELECT cit.name, co.cou_name FROM city cit INNER JOIN t_country_cou co ON (c.cou_code = co.cou_code)&#39;</span><span class="p">);</span>
        <span class="nv">$hydrator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Hydrator</span><span class="p">();</span>
        <span class="nv">$hydrator</span><span class="o">-&gt;</span><span class="na">mapObjectTo</span><span class="p">(</span><span class="s1">&#39;co&#39;</span><span class="p">,</span> <span class="s1">&#39;cit&#39;</span><span class="p">,</span> <span class="s1">&#39;setCountry&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="nv">$query</span><span class="o">-&gt;</span><span class="na">query</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="na">getCollection</span><span class="p">(</span><span class="nv">$hydrator</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
</pre></div>
</div>
<p>La collection retournée est composée de lignes structurées ainsi :</p>
<div class="highlight-php"><div class="highlight"><pre><span></span><span class="nv">$row</span> <span class="o">=</span>
  <span class="p">[</span>
    <span class="s1">&#39;cit&#39;</span> <span class="o">=&gt;</span> <span class="nx">City</span><span class="p">(</span>
      <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="s2">&quot;Palaiseau&quot;</span><span class="p">,</span>
      <span class="p">[</span><span class="nx">country</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="nx">Country</span><span class="p">(</span>
        <span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;France&quot;</span>
      <span class="p">)</span>
    <span class="p">)</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
</div>


                </div>
            </div>
        </div>

    </section>
    
<footer role="contentinfo" class="ccmcss_footer ccmcss_footer--dark">
    <ul class="toollinks">
        <li><a href="http://www.ccmbenchmark.com/advertising/fr/qui-sommes-nous/">Qui sommes-nous ?</a></li>
        <li><a href="http://www.ccmbenchmark.com/institut/contact/information">Contact</a></li>
        <li><a href="http://benchmail.benchmark.fr/magazine/archive_406_1.html">Press</a></li>
        <li><a href="http://www.journaldunet.com/donneesperso.shtml">Données personnelles</a></li>
        <li><a href="http://www.ccmbenchmark.com/mentions-legales">Mentions légales</a></li>
        <li><a href="http://www.ccmbenchmark.com/">&copy; 2015 CCM Benchmark</a></li>
    </ul>
    <div class="logo">
        <a href="#">
            <hgroup>
                <span>CCM Benchmark Group</span>
            </hgroup>
        </a>
    </div>
    <div class="brands">
        <a href="http://www.commentcamarche.net/" class="group_ccm" original-title="commentçamarche.net"></a>
        <a href="http://www.journaldunet.com/" class="group_jdn" original-title="Le Journal du Net"></a>
        <a href="http://droit-finances.commentcamarche.net/" class="group_df" original-title="Droit-finances.net"></a>
        <a href="http://www.journaldesfemmes.com/" class="group_jdf" original-title="Journal des femmes"></a>
        <a href="http://www.linternaute.com/" class="group_linter" original-title="linternaute.com"></a>
        <a href="http://copainsdavant.linternaute.com/" class="group_copains" original-title="Copains d'avant"></a>
        <a href="http://sante-medecine.commentcamarche.net/" class="group_ms" original-title="Santé-médecine.net"></a>
    </div>
    <p class="foot_links">
        <a href="http://www.linternaute.com/voyage/">Voyage</a>,
        <a href="http://www.linternaute.com/loisirs/">Loisirs</a>,
        <a href="http://www.linternaute.com/restaurant/">Restos</a>,
        <a href="http://www.linternaute.com/cinema/">Cinéma</a>,
        <a href="http://www.linternaute.com/bricolage/">Bricolage</a>,
        <a href="http://www.linternaute.com/argent/">Argent</a>,
        <a href="http://deco.journaldesfemmes.com/">Décoration</a>,
        <a href="http://cuisine.journaldesfemmes.com/">Cuisine</a>,
        <a href="http://www.linternaute.com/auto/">Auto</a>,
        <a href="http://sante.journaldesfemmes.com/">Santé</a>,
        <a href="http://www.linternaute.com/homme/">Homme</a>,
        <a href="http://www.linternaute.com/actualite/">Actualités</a>,
        <a href="http://www.commentcamarche.net/">High-tech</a>,
        <a href="http://www.journaldunet.com/">Entreprise</a>,
        <a href="http://expeert.com/fr/">Expeert</a>
    </p>
</footer>

</div>



<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Ting docs</span>
      v: 3.x
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Language</dt>
            
            <dd><a href="/ting/doc/3.x/en/index.html">en</a></dd>
            
            <dd><a href="/ting/doc/3.x/fr/index.html">fr</a></dd>
            
        </dl>
        <dl>
            <dt>Versions</dt>
            
            <dd><a href="/ting/doc/2.x/fr/">2.x</a></dd>
            
            <dd><a href="/ting/doc/3.x/fr/">3.x</a></dd>
            
        </dl>
    </div>
</div>




<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'./',
        VERSION:'1',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
    };
</script>
<script type="text/javascript" src="_static/jquery.js"></script>
<script type="text/javascript" src="_static/underscore.js"></script>
<script type="text/javascript" src="_static/doctools.js"></script>
<script type="text/javascript" src="_static/translations.js"></script>





<script type="text/javascript" src="_static/js/theme.js"></script>




<script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.StickyNav.enable();
    });
</script>
 

</body>
</html>